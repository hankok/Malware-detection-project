__author__ = 'hankok'
import binascii
dns_error = 0
tcp_error = 0

finalList = []
errorList = []
ack_dstport = []
try:
    f = open("out.csv", "r")
    next(f)
    for line in iter(f):
        elems = line.split(',')
        if elems[14] == '0':
            finalList.append(elems)

        if elems[14] != '0':
            ack_dstport.append(elems[9])

        if elems[6] == '53':
            dns_error = 1

    f.close()
except:
    print('file error.')

try:
    f = open("dns.txt", "r")
    for line in iter(f):
        print(line)
        if 'No such name' in line:
            dns_error = 1
    f.close()
except:
    print('file error.')


#print(ack_dstport)
i = 0
for l in finalList:
    #print(l[6])
    if l[6] not in ack_dstport:
        errorList.append(l)

if len(errorList) > 0:
    # there are packages without ack
    tcp_error = 1

print(tcp_error,dns_error)

f = open('net_result','w')
f.write(str(tcp_error) + ' ' + str(dns_error) +'\n') # python will convert \n to os.linesep
f.close() # you can omit in most cases as the destructor will call it
